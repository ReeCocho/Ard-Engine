[
    // Globally accessible data for a frame in a scene renderer.
    (
        name: "Global",
        bindings: [
            // All objects.
            (
                name: "GlobalObjectData",
                stage: AllStages,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "object_data", ty: Struct("ObjectData"))),
                )
            ),
            // Instance to object ID mapping.
            (
                name: "ObjectIds",
                stage: AllStages,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "object_ids", ty: U32)),
                )
            ),
            // Global lighting data (sun).
            (
                name: "GlobalLightingInfo",
                stage: AllStages,
                count: "1",
                data: Ubo((
                    name: "global_lighting",
                    ty: Struct("GlobalLighting"),
                ))
            ),
            // Shadow cascades
            (
                name: "ShadowCascades",
                stage: AllStages,
                count: "MAX_SHADOW_CASCADES",
                data: ShadowTextureArray("shadow_cascades")
            ),
            // Sun shadowing info
            (
                name: "SunShadowInfo",
                stage: AllStages,
                count: "1",
                data: Ubo((
                    name: "sun_shadow_info",
                    ty: Struct("SunShadows"),
                ))
            ),
            // Ambient occlusion image.
            (
                name: "AoImage",
                stage: AllStages,
                count: "1",
                data: Texture("ao_image")
            ),
            // Global light buffer.
            (
                name: "Lights",
                stage: AllStages,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "lights", ty: Struct("Light"))),
                )
            ),
            // Clusters of indices of lights.
            (
                name: "LightClusters",
                stage: AllStages,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: Some((name: "light_table", ty: Struct("LightTable"))),
                    unbounded_array: None,
                )
            ),
        ]
    ),
    // Per material and texture slot bindings.
    (
        name: "Materials",
        bindings: [
            // Material data SSBO
            (
                name: "Data",
                stage: AllGraphics,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "material_data", ty: Struct("ArdMaterialData"))),
                )
            ),
            // Texture slots SSBO
            (
                name: "TextureSlots",
                stage: AllGraphics,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "texture_slots", ty: Array(ty: U32, len: "MAX_TEXTURES_PER_MATERIAL"))),
                )
            )
        ]  
    ),
    // Bindless textures layout.
    (
        name: "Textures",
        bindings: [
            (
                name: "Textures",
                stage: AllGraphics,
                count: "MAX_TEXTURES",
                data: UnboundedTextureArray("textures"),
            )
        ]
    ),
    // Camera including froxels for clustering
    (
        name: "Camera",
        bindings: [
            (
                name: "CameraUbo",
                stage: AllStages,
                count: "1",
                data: Ubo((
                    name: "camera",
                    ty: Struct("Camera"),
                ))
            ),
            (
                name: "CameraFroxels",
                stage: AllStages,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: Some((name: "froxels", ty: Struct("Froxels"))),
                    unbounded_array: None,
                )
            )
        ]
    ),
    // Camera froxel generation.
    (
        name: "FroxelGen",
        bindings: [
            (
                name: "CameraUbo",
                stage: Compute,
                count: "1",
                data: Ubo((
                    name: "camera",
                    ty: Struct("Camera"),
                ))
            ),
            (
                name: "CameraFroxels",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: WriteOnly,
                    inner: Some((name: "froxels", ty: Struct("Froxels"))),
                    unbounded_array: None,
                )
            )
        ]
    ),
    // Hierarchical z-buffer generation.
    (
        name: "HzbGen",
        bindings: [
            (
                name: "InputDepth",
                stage: Compute,
                count: "1",
                data: Texture("input_depth_buffer"),
            ),
            (
                name: "OutputDepth",
                stage: Compute,
                count: "1",
                data: StorageImage(
                    field_name: "output_depth_buffer",
                    restrict: true,
                    access: WriteOnly,
                    format: R32F,
                )
            )
        ]
    ),
    // Draw call generation.
    (
        name: "DrawGen",
        bindings: [
            (
                name: "DrawGroups",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "draw_groups", ty: Struct("DrawGroup"))),
                )
            ),
            (
                name: "InstanceCounts",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadWrite,
                    inner: None,
                    unbounded_array: Some((name: "instance_counts", ty: U32)),
                )
            ),
            (
                name: "Objects",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "objects", ty: Struct("ObjectData"))),
                )
            ),
            (
                name: "InputIds",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "input_ids", ty: Struct("ObjectId"))),
                )
            ),
            (
                name: "OutputIds",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: WriteOnly,
                    inner: None,
                    unbounded_array: Some((name: "output_ids", ty: U32)),
                )
            ),
            (
                name: "MeshInfoLookup",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "mesh_info", ty: Struct("MeshInfo"))),
                )
            ),
            (
                name: "HzbImage",
                stage: Compute,
                count: "1",
                data: Texture("hzb_image"),
            )
        ]
    ),
    // Draw call generation WITHOUT hzb culling.
    (
        name: "DrawGenNoHzb",
        bindings: [
            (
                name: "DrawGroups",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadWrite,
                    inner: None,
                    unbounded_array: Some((name: "draw_groups", ty: Struct("DrawGroup"))),
                )
            ),
            (
                name: "InstanceCounts",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadWrite,
                    inner: None,
                    unbounded_array: Some((name: "instance_counts", ty: U32)),
                )
            ),
            (
                name: "Objects",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "objects", ty: Struct("ObjectData"))),
                )
            ),
            (
                name: "InputIds",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "input_ids", ty: Struct("ObjectId"))),
                )
            ),
            (
                name: "OutputIds",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: WriteOnly,
                    inner: None,
                    unbounded_array: Some((name: "output_ids", ty: U32)),
                )
            ),
            (
                name: "MeshInfoLookup",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "mesh_info", ty: Struct("MeshInfo"))),
                )
            )
        ]
    ),
    // Draw call compaction.
    (
        name: "DrawCompact",
        bindings: [
            (
                name: "DrawGroupsSrc",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "draw_groups_src", ty: Struct("DrawGroup"))),
                )
            ),
            (
                name: "InstanceCountsSrc",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadWrite,
                    inner: None,
                    unbounded_array: Some((name: "instance_counts", ty: U32)),
                )
            ),
            (
                name: "DrawCallsDst",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadWrite,
                    inner: None,
                    unbounded_array: Some((name: "draw_calls_dst", ty: Struct("DrawCall"))),
                )
            ),
            (
                name: "DrawCounts",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadWrite,
                    inner: None,
                    unbounded_array: Some((name: "draw_counts", ty: U32)),
                )
            ),
            (
                name: "MeshInfoLookup",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "mesh_info", ty: Struct("MeshInfo"))),
                )
            )
        ],
    ),
    // Light clustering.
    (
        name: "LightClustering",
        bindings: [
            (
                name: "Lights",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "lights", ty: Struct("Light"))),
                )
            ),
            (
                name: "LightClusters",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadWrite,
                    inner: Some((name: "light_table", ty: Struct("LightTable"))),
                    unbounded_array: None,
                )
            )
        ]
    ),
    // AO construction.
    (
        name: "AoConstruct",
        bindings: [
            (
                name: "DepthTexture",
                stage: Compute,
                count: "1",
                data: Texture("depth_tex")
            ),
            (
                name: "AoImage",
                stage: Compute,
                count: "1",
                data: StorageImage(
                    field_name: "ao_image",
                    restrict: true,
                    access: WriteOnly,
                    format: R16F,
                )
            ),
            (
                name: "NoiseTexture",
                stage: Compute,
                count: "1",
                data: Texture("noise_tex")
            ),
            (
                name: "KernelSamples",
                stage: Compute,
                count: "1",
                data: Ubo((
                    name: "samples",
                    ty: Array(name: "samples", ty: Vec4, len: "KERNEL_SIZE")
                ))
            )
        ]
    ),
    // AO blurring.
    (
        name: "AoBlur",
        bindings: [
            (
                name: "InputTexture",
                stage: Compute,
                count: "1",
                data: Texture("input_tex")
            ),
            (
                name: "AoImage",
                stage: Compute,
                count: "1",
                data: StorageImage(
                    field_name: "ao_image",
                    restrict: true,
                    access: WriteOnly,
                    format: R16F,
                )
            )
        ],
    ),
    // Adaptive luminance histogram generation.
    (
        name: "HistogramGen",
        bindings: [
            (
                name: "InputTexture",
                stage: Compute,
                count: "1",
                data: Texture("hdr_src")
            ),
            (
                name: "Histogram",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadWrite,
                    inner: Some((name: "histogram", ty: Array(ty: U32, len: "ADAPTIVE_LUM_HISTOGRAM_SIZE"))),
                    unbounded_array: None,
                )
            )
        ]
    ),
    // Adaptive luminance.
    (
        name: "AdaptiveLum",
        bindings: [
            (
                name: "Histogram",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadWrite,
                    inner: Some((name: "histogram", ty: Array(ty: U32, len: "ADAPTIVE_LUM_HISTOGRAM_SIZE"))),
                    unbounded_array: None,
                )
            ),
            (
                name: "Luminance",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadWrite,
                    inner: Some((name: "out_luminance", ty: F32)),
                    unbounded_array: None,
                )
            )
        ]
    ),
    // Tonemapping.
    (
        name: "Tonemapping",
        bindings: [
            (
                name: "SourceImage",
                stage: Fragment,
                count: "1",
                data: Texture("screen_tex")
            ),
            (
                name: "SourceDepth",
                stage: Fragment,
                count: "1",
                data: Texture("depth_tex")
            ),
            (
                name: "BloomImage",
                stage: Fragment,
                count: "1",
                data: Texture("bloom_image")
            ),
            (
                name: "SunShaftsImage",
                stage: Fragment,
                count: "1",
                data: Texture("sun_shafts_image")
            ),
            (
                name: "Luminance",
                stage: Fragment,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: Some((name: "luminance", ty: F32)),
                    unbounded_array: None,
                )
            )
        ]
    ),
    // Bloom.
    (
        name: "Bloom",
        bindings: [
            (
                name: "SourceImage",
                stage: Fragment,
                count: "1",
                data: Texture("screen_tex")
            )
        ]
    ),
    // Sun shafts.
    (
        name: "SunShafts",
        bindings: [
            (
                name: "SourceDepth",
                stage: Compute,
                count: "1",
                data: Texture("depth_tex")
            ),
            (
                name: "OutputTex",
                stage: Compute,
                count: "1",
                data: StorageImage(
                    field_name: "output_tex",
                    restrict: true,
                    access: WriteOnly,
                    format: Rgba16F,
                )
            ),
            // Global lighting data (sun).
            (
                name: "GlobalLightingInfo",
                stage: Compute,
                count: "1",
                data: Ubo((
                    name: "global_lighting",
                    ty: Struct("GlobalLighting"),
                ))
            ),
            // Shadow cascades
            (
                name: "ShadowCascades",
                stage: Compute,
                count: "MAX_SHADOW_CASCADES",
                data: ShadowTextureArray("shadow_cascades")
            ),
            // Sun shadowing info
            (
                name: "SunShadowInfo",
                stage: Compute,
                count: "1",
                data: Ubo((
                    name: "sun_shadow_info",
                    ty: Struct("SunShadows"),
                ))
            )
        ]
    ),
    // Sun shaft epipolar line setup.
    (
        name: "SunShaftLineSetup",
        bindings: [
            (
                name: "SourceDepth",
                stage: Compute,
                count: "1",
                data: Texture("depth_tex")
            ),
            (
                name: "EpipolarLines",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: WriteOnly,
                    inner: None,
                    unbounded_array: Some((name: "epipolar_lines", ty: Struct("SunShaftSample"))),
                )
            ),
            (
                name: "EpipolarSamples",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: WriteOnly,
                    inner: Some((name: "sample_count", ty: U32)),
                    unbounded_array: Some((name: "sample_indices", ty: U32)),
                )
            ),
            (
                name: "GlobalLightingInfo",
                stage: Compute,
                count: "1",
                data: Ubo((
                    name: "global_lighting",
                    ty: Struct("GlobalLighting"),
                ))
            ),
            (
                name: "SunShaftIndirectDispatch",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: WriteOnly,
                    inner: Some((name: "indirect_dispatch", ty: Struct("IndirectDispatch"))),
                    unbounded_array: None,
                )
            ),
        ]
    ),
    // Sun shaft refinement.
    (
        name: "SunShaftRefine",
        bindings: [
            (
                name: "EpipolarLines",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadWrite,
                    inner: None,
                    unbounded_array: Some((name: "epipolar_lines", ty: Struct("SunShaftSample"))),
                )
            ),
            (
                name: "EpipolarSamples",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadWrite,
                    inner: Some((name: "sample_count", ty: U32)),
                    unbounded_array: Some((name: "sample_indices", ty: U32)),
                )
            ),
            (
                name: "SunShaftIndirectDispatch",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadWrite,
                    inner: Some((name: "indirect_dispatch", ty: Struct("IndirectDispatch"))),
                    unbounded_array: None,
                )
            ),
        ]
    ),
    // Sun shaft sampling.
    (
        name: "SunShaftSample",
        bindings: [
            (
                name: "EpipolarLines",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadWrite,
                    inner: None,
                    unbounded_array: Some((name: "epipolar_lines", ty: Struct("SunShaftSample"))),
                )
            ),
            (
                name: "EpipolarSamples",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: Some((name: "sample_count", ty: U32)),
                    unbounded_array: Some((name: "sample_indices", ty: U32)),
                )
            ),
            (
                name: "GlobalLightingInfo",
                stage: Compute,
                count: "1",
                data: Ubo((
                    name: "global_lighting",
                    ty: Struct("GlobalLighting"),
                ))
            ),
            (
                name: "ShadowCascades",
                stage: Compute,
                count: "MAX_SHADOW_CASCADES",
                data: ShadowTextureArray("shadow_cascades")
            ),
            (
                name: "SunShadowInfo",
                stage: Compute,
                count: "1",
                data: Ubo((
                    name: "sun_shadow_info",
                    ty: Struct("SunShadows"),
                ))
            )
        ]
    ),
    // Sun shaft interpolation.
    (
        name: "SunShaftInterpolation",
        bindings: [
            (
                name: "EpipolarLines",
                stage: Compute,
                count: "1",
                data: Ssbo(
                    restrict: true,
                    access: ReadOnly,
                    inner: None,
                    unbounded_array: Some((name: "epipolar_lines", ty: Struct("SunShaftSample"))),
                )
            ),
            (
                name: "GlobalLightingInfo",
                stage: Compute,
                count: "1",
                data: Ubo((
                    name: "global_lighting",
                    ty: Struct("GlobalLighting"),
                ))
            ),
            (
                name: "SourceDepth",
                stage: Compute,
                count: "1",
                data: Texture("depth_tex")
            ),
            (
                name: "OutputTex",
                stage: Compute,
                count: "1",
                data: StorageImage(
                    field_name: "output_tex",
                    restrict: true,
                    access: WriteOnly,
                    format: Rgba16F,
                )
            ),
        ]
    ),
    // FXAA
    (
        name: "FXAA",
        bindings: [
            (
                name: "InputTexture",
                stage: Fragment,
                count: "1",
                data: Texture("screen_tex")
            )
        ]
    )
]